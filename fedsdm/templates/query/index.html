{% extends 'base.html' %}
{% block title %}Query{% endblock %}

{% block header %}Query{% endblock %}

{% block content %}
<div class="row row-header">
    {% include 'federations-list.html' %}
</div>

<link href="{{ url_for('static', filename='css/yasqe.min.css') }}" rel='stylesheet' type='text/css'/>

<div class="row col-lg-12" id="queryrow" style="display:none">
    <div class="col-lg-7">
        <div id="yasqe"></div>
        <div class="form-group" style="margin-top: 15px">
            <label class="control-label" for="timeout">Timeout (in seconds)</label>
            <input class="form-control" id="timeout" name="timeout" type="text"/>
        </div>
    </div>
    <div class="col-lg-5">
        <div>
            <div class="card-header bg-white">Example Queries</div>
            <div class="card-body">
                <ul>
                    <li><a href="#" id="classes">Get all classes represented in the data</a></li>
                    <li><a href="#" id="analyticalnumtheoryex">A Video about &quot;Analytic number theory around torsion homology&quot;</a></li>
                    <!-- TODO: add more example queries here -->
                </ul>
                <div class="form-group">
                    <button type="button" class="btn btn-success" id="showtablebtn" style="display:none">Show Table</button>
                    <button type="button" class="btn btn-success" id="visualizebtn">Visualize</button>
                </div>
            </div>
        </div>
    </div>
</div>
<!--/ .row -->

<div class="row" id="resultrow" style="display:none">
    <div class="col-lg-12">
        <div class="card bg-light">
            <span id="resstatus"></span>
            <div class="card-header" id="resultinfo">
                Results
                <div class="float-end">
                    <b>1st Result time:<span id="frestime" style="color:#D2691E"></span></b> &nbsp;|&nbsp;<b>Execution time:<span id="exetime" style="color:#D2691E"></span></b>
                </div>
            </div>
            <!-- /.card-header -->
            <div class="card-body" id="results">
                <div id="fedbackdiv" class="form-group" style="text-align: right">
                    <button class="btn btn-primary" name="addfeedback" id="addfeedback" disabled="disabled" data-bs-toggle="modal" data-bs-target="#feedbackModal"> Report an Issue </button>
                    <button class="btn btn-danger" name="stop" id="stopbutton" disabled="disabled"> Stop </button>
                </div>
                <div id="resulttablediv">
                    <table style="width: 100%" class="table table-striped table-bordered table-hover" id="queryresultstable"></table>
                    <!-- /.table-responsive -->
                </div>
                <div id="resultgraphdiv" style="display:none">
                    <div id="graph" class="col-lg-12 rdfmt"></div>
                </div>
            </div>
            <!-- /.card-body -->
        </div>
        <!-- /.card -->
    </div>
    <!-- /.col-lg-12 -->
</div>
<!-- /.row -->

<style>
    label { margin-bottom: .25rem;}
    textarea, .ui-dialog select { margin-bottom: 10px; width: 100%; padding: .4em; }
    fieldset { padding:0; border:0; margin-top:25px; }
    .ui-dialog .ui-state-error { padding: .3em; }
    .validateTips { border: 1px solid transparent; padding: 0.3em; margin-bottom: -.5rem; }
</style>

<script src="{{ url_for('static', filename='js/libs/d3.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/libs/yasqe.bundled.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/colors.js') }}"></script>
<script src="{{ url_for('static', filename='js/utils.js') }}"></script>
<script src="{{ url_for('static', filename='js/query.js') }}"></script>

{% endblock %}

{% include 'query/modal-feedback.html' %}
