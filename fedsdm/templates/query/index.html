{% extends 'base.html' %}
{% block title %}Query{% endblock %}

{% block header %}Query{% endblock %}

{% block content %}
<div class="row row-header">
    {% include 'federations-list.html' %}
</div>

<link href="{{ url_for('static', filename='css/yasqe.min.css') }}" rel='stylesheet' type='text/css'/>

<div class="row col-lg-12" id="queryrow" style="display:none">
    <div class="col-lg-7">
        <div id="yasqe"></div>
        <div class="form-group" style="margin-top: 15px">
            <label class="control-label " for="timeout">Timeout (in seconds)</label>
            <input class="form-control" id="timeout" name="timeout" type="text"/>
        </div>
    </div>
    <div class="col-lg-5">
        <div>
            <div class="panel-heading">Example Queries</div>
            <div class="panel-body">
                <ul>
                    <li><a href="#" id="classes">Get all classes represented in the data</a></li>
                    <li><a href="#" id="analyticalnumtheoryex">A Video about &quot;Analytic number theory around torsion homology&quot;</a></li>
                    <!-- TODO: add more example queries here -->
                </ul>
                <div class="form-group">
                    <button type="button" class="btn btn-success" id="showtablebtn" style="display:none">Show Table</button>
                    <button type="button" class="btn btn-success" id="visualizebtn">Visualize</button>
                </div>
            </div>
        </div>
    </div>
</div>
<!--/ .row -->

<div class="row" id="resultrow" style="display:none">
    <div class="col-lg-12">
        <div class="panel panel-default" >
            <p><b><span id="resstatus" style="color:red"></span></b></p>
            <div class="panel-heading" id="resultinfo">
                Results
                <div class="pull-right">
                    <p><b>1st Result time:<span id="frestime" style="color:#D2691E"></span></b> &nbsp;|&nbsp;
                    <b>Execution time:<span id="exetime" style="color:#D2691E"></span></b></p>
                </div>
            </div>
            <!-- /.panel-heading -->
            <div class="panel-body" id="results">
                <div id="fedbackdiv"  class="form-group" style="text-align: right">
                    <button class="btn btn-primary" name="addfeedback" id="addfeedback" disabled="disabled" > Report an Issue </button>
                    <button class="btn btn-danger" name="stop" id="stopbutton" disabled="disabled" > Stop </button>
                </div>
                <div class="row" id="resulttablediv">
                    <table style="width: 100%" class="table display table-striped table-bordered table-hover" id="queryresultstable"></table>
                    <!-- /.table-responsive -->
                </div>
                <div class="row" id="resultgraphdiv" style="display:none">
                    <div id="graph" class="col-lg-12 rdfmt"></div>
                </div>
            </div>
            <!-- /.panel-body -->
        </div>
        <!-- /.panel -->
    </div>
    <!-- /.col-lg-12 -->
</div>
<!-- /.row -->

<div id="feedback-form" title="Add Feedback" class="ui-widget"  style="display:none">
    <p class="validateTips">Some fields are required.</p>
    <form>
        <fieldset>
            <select class="form-control " id="fedbackpreds" style="width:300px;">
                <option value="-1">Select column</option>
                <option value="All">All</option>
            </select>
            <label for="feedbackdesc" class="label-class" >Description</label>
            <textarea class="form-control"  name="feedbackdesc" id="feedbackdesc" placeholder="Enter a query" rows="4" required></textarea>

            <!-- Allow form submission with keyboard without duplicating the dialog button -->
            <input type="submit" tabindex="-1" style="position:absolute; top:-1000px">
        </fieldset>
    </form>
</div>
<!-- end of add dialog -->

<script src="/js/libs/popper.min.js"></script>
<script src="/js/libs/d3.v3.min.js"></script>
<script src="/js/libs/dagre-d3.js"></script>
<script src="/js/libs/d3-polygon.v1.min.js"></script>

<script src="{{ url_for('static', filename='js/libs/yasqe.bundled.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/colors.js') }}"></script>
<script src="{{ url_for('static', filename='js/utils.js') }}"></script>
<script src="{{ url_for('static', filename='js/query.js') }}"></script>

{% endblock %}
